<Window x:Class="CouseWork3Semester.Views.SettlementEvictionsView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settlements and Evictions"
        Height="900" Width="1200"
        MinHeight="650" MinWidth="950"
        WindowStartupLocation="CenterScreen">
	<Grid Margin="10">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<!-- Header -->
			<RowDefinition Height="Auto"/>
			<!-- Create settlement -->
			<RowDefinition Height="*"/>
			<!-- Settlements table -->
			<RowDefinition Height="Auto"/>
			<!-- Settlement actions -->
			<RowDefinition Height="*"/>
			<!-- Evictions table -->
			<RowDefinition Height="Auto"/>
			<!-- Create eviction -->
		</Grid.RowDefinitions>

		<!-- Заголовок -->
		<DockPanel Grid.Row="0" LastChildFill="False" Margin="0,0,0,10">
			<TextBlock Text="Settlements and Evictions" FontSize="22" FontWeight="Bold" DockPanel.Dock="Left"/>
			<Button x:Name="RefreshButton" Content="Refresh" Width="120" DockPanel.Dock="Right"/>
		</DockPanel>

		<!-- Создание заселения -->
		<GroupBox Grid.Row="1" Header="Create Settlement (requires ManageEvictions OR ManageOccupants)" x:Name="CreateSettlementGroup" Margin="0,0,0,10">
			<StackPanel Orientation="Vertical" Margin="10">
				<StackPanel Orientation="Horizontal" Margin="0,0,0,10">
					<StackPanel Width="280" Margin="0,0,10,0">
						<TextBlock Text="Dormitory"/>
						<ComboBox x:Name="DormitoryComboBoxSettle" DisplayMemberPath="Display" SelectedValuePath="Number"/>
					</StackPanel>
					<StackPanel Width="220" Margin="0,0,10,0">
						<TextBlock Text="Room"/>
						<ComboBox x:Name="RoomComboBoxSettle" DisplayMemberPath="Display" SelectedValuePath="Number"/>
					</StackPanel>
					<StackPanel Width="220" Margin="0,0,10,0">
						<TextBlock Text="Document"/>
						<ComboBox x:Name="DocumentComboBox" DisplayMemberPath="Display" SelectedValuePath="Id"/>
					</StackPanel>
					<StackPanel Width="180" Margin="0,0,10,0">
						<TextBlock Text="Settlement Date"/>
						<DatePicker x:Name="SettlementDatePicker"/>
					</StackPanel>
				</StackPanel>

				<TextBlock Text="Select occupants to settle (from registry)" FontWeight="SemiBold" Margin="0,0,0,5"/>
				<ListBox x:Name="OccupantsSelectList"
                         SelectionMode="Extended"
                         Height="180">
					<ListBox.ItemTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal" Margin="4,2">
								<TextBlock Text="{Binding FullName}" Width="240"/>
								<TextBlock Text="{Binding Type}" Width="120"/>
								<TextBlock Text="{Binding BirthDate}" Width="140"/>
							</StackPanel>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>

				<StackPanel Orientation="Horizontal" Margin="0,10,0,0">
					<Button x:Name="CreateSettlementButton" Content="Create Settlement" Width="180" Margin="0,0,10,0"/>
				</StackPanel>
			</StackPanel>
		</GroupBox>

		<!-- Таблица заселений -->
		<GroupBox Grid.Row="2" Header="Active Settlements">
			<Grid>
				<DataGrid x:Name="SettlementsGrid"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          Margin="5"
                          CanUserResizeRows="False"
                          EnableRowVirtualization="True"
                          EnableColumnVirtualization="True">
					<DataGrid.Columns>
						<DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="220"/>
						<DataGridTextColumn Header="Date" Binding="{Binding SettlementDate}" Width="120"/>
						<DataGridTextColumn Header="Room" Binding="{Binding RoomNumber}" Width="80"/>
						<DataGridTextColumn Header="Occupants" Binding="{Binding OccupantsCount}" Width="100"/>
						<DataGridTextColumn Header="Document" Binding="{Binding DocumentTitle}" Width="200"/>
						<DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="120"/>
					</DataGrid.Columns>
				</DataGrid>
			</Grid>
		</GroupBox>

		<!-- Действия с заселением -->
		<GroupBox Grid.Row="3" Header="Settlement actions (requires ManageEvictions)" x:Name="SettlementActionsGroup" Margin="0,10,0,10">
			<StackPanel Orientation="Horizontal" Margin="10">
				<Button x:Name="PerformSettlementButton" Content="Perform Settlement" Width="180" Margin="0,0,10,0"/>
				<Button x:Name="CompleteSettlementButton" Content="Complete Settlement" Width="180" Margin="0,0,10,0"/>
				<Button x:Name="CancelSettlementButton" Content="Cancel Settlement" Width="180"/>
			</StackPanel>
		</GroupBox>

		<!-- Таблица выселений -->
		<GroupBox Grid.Row="4" Header="Evictions (Pending/In Progress)">
			<Grid>
				<DataGrid x:Name="EvictionsGrid"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          Margin="5"
                          CanUserResizeRows="False"
                          EnableRowVirtualization="True"
                          EnableColumnVirtualization="True">
					<DataGrid.Columns>
						<DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="220"/>
						<DataGridTextColumn Header="Date" Binding="{Binding EvictionDate}" Width="120"/>
						<DataGridTextColumn Header="Room" Binding="{Binding RoomNumber}" Width="80"/>
						<DataGridTextColumn Header="Occupants" Binding="{Binding OccupantsCount}" Width="100"/>
						<DataGridTextColumn Header="Reason" Binding="{Binding Reason}" Width="240"/>
						<DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="120"/>
					</DataGrid.Columns>
				</DataGrid>
			</Grid>
		</GroupBox>

		<!-- Создание выселения -->
		<GroupBox Grid.Row="5" Header="Create Eviction (requires ManageEvictions)" x:Name="CreateEvictionGroup" Margin="0,10,0,0">
			<StackPanel Orientation="Vertical" Margin="10">
				<StackPanel Orientation="Horizontal" Margin="0,0,0,10">
					<StackPanel Width="280" Margin="0,0,10,0">
						<TextBlock Text="Dormitory"/>
						<ComboBox x:Name="DormitoryComboBox" DisplayMemberPath="Display" SelectedValuePath="Number"/>
					</StackPanel>
					<StackPanel Width="220" Margin="0,0,10,0">
						<TextBlock Text="Room"/>
						<ComboBox x:Name="RoomComboBox" DisplayMemberPath="Display" SelectedValuePath="Number"/>
					</StackPanel>
					<StackPanel Width="180" Margin="0,0,10,0">
						<TextBlock Text="Eviction Date"/>
						<DatePicker x:Name="EvictionDatePicker"/>
					</StackPanel>
					<StackPanel Width="380">
						<TextBlock Text="Reason"/>
						<TextBox x:Name="EvictionReasonTextBox"/>
					</StackPanel>
				</StackPanel>

				<TextBlock Text="Select occupants to evict (from the selected room)" FontWeight="SemiBold" Margin="0,0,0,5"/>
				<DataGrid x:Name="RoomOccupantsGrid"
                          AutoGenerateColumns="False"
                          SelectionMode="Extended"
                          Height="180">
					<DataGrid.Columns>
						<DataGridTextColumn Header="Full Name" Binding="{Binding FullName}" Width="240"/>
						<DataGridTextColumn Header="Birth Date" Binding="{Binding BirthDate}" Width="140"/>
						<DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="120"/>
					</DataGrid.Columns>
				</DataGrid>

				<StackPanel Orientation="Horizontal">
					<Button x:Name="CreateEvictionButton" Content="Create Eviction" Width="180" Margin="0,0,10,0"/>
					<Button x:Name="ExecuteEvictionButton" Content="Execute Selected Eviction" Width="220" Margin="0,0,10,0"/>
					<Button x:Name="RemoveEvictionButton" Content="Remove Selected Eviction" Width="200"/>
				</StackPanel>
			</StackPanel>
		</GroupBox>
	</Grid>
</Window>