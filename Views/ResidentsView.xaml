<Window x:Class="CouseWork3Semester.Views.ResidentsView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Residents Registration"
        Height="800"
        Width="1100"
        MinHeight="600"
        MinWidth="900"
        WindowStartupLocation="CenterScreen">
	<Grid Margin="10">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<!-- Header -->
			<RowDefinition Height="*"/>
			<!-- Residents table -->
			<RowDefinition Height="Auto"/>
			<!-- Add resident -->
			<RowDefinition Height="Auto"/>
			<!-- Edit resident -->
			<RowDefinition Height="*"/>
			<!-- Children table -->
			<RowDefinition Height="Auto"/>
			<!-- Add child -->
		</Grid.RowDefinitions>

		<!-- Заголовок -->
		<DockPanel Grid.Row="0" LastChildFill="False" Margin="0,0,0,10">
			<TextBlock Text="Resident And Children"
                       FontSize="22"
                       FontWeight="Bold"
                       DockPanel.Dock="Left"/>
		</DockPanel>

		<!-- Таблица жильцов -->
		<GroupBox Grid.Row="1" Header="Residents">
			<Grid>
				<DataGrid x:Name="ResidentsGrid"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          Margin="5"
                          CanUserResizeRows="False"
                          EnableRowVirtualization="True"
                          EnableColumnVirtualization="True">
					<DataGrid.Resources>
						<!-- Общий стиль для текстовых ячеек -->
						<Style x:Key="TextCellStyle" TargetType="TextBlock">
							<Setter Property="TextWrapping" Value="NoWrap"/>
							<Setter Property="VerticalAlignment" Value="Center"/>
							<Setter Property="Padding" Value="4,0,4,0"/>
						</Style>
					</DataGrid.Resources>
					<DataGrid.Columns>
						<DataGridTextColumn Header="Registration #"
                                            Binding="{Binding RegistrationNumber}"
                                            Width="120"
                                            ElementStyle="{StaticResource TextCellStyle}"/>
						<DataGridTextColumn Header="Full Name"
                                            Binding="{Binding FullName}"
                                            Width="200"
                                            ElementStyle="{StaticResource TextCellStyle}"/>
						<DataGridTextColumn Header="Gender"
                                            Binding="{Binding Gender}"
                                            Width="100"
                                            ElementStyle="{StaticResource TextCellStyle}"/>
						<DataGridTextColumn Header="Birth Date"
                                            Binding="{Binding BirthDateString}"
                                            Width="120"
                                            ElementStyle="{StaticResource TextCellStyle}"/>
						<DataGridTextColumn Header="Passport"
                                            Binding="{Binding PassportShort}"
                                            Width="160"
                                            ElementStyle="{StaticResource TextCellStyle}"/>
						<DataGridTextColumn Header="Issued By"
                                            Binding="{Binding IssuedBy}"
                                            Width="200"
                                            ElementStyle="{StaticResource TextCellStyle}"/>
						<DataGridTextColumn Header="Check-in Date"
                                            Binding="{Binding CheckInDateString}"
                                            Width="120"
                                            ElementStyle="{StaticResource TextCellStyle}"/>
						<DataGridCheckBoxColumn Header="Employed"
                                                Binding="{Binding WorkStatus}"
                                                Width="100"/>
						<DataGridTextColumn Header="Workplace"
                                            Binding="{Binding Workplace}"
                                            Width="180"
                                            ElementStyle="{StaticResource TextCellStyle}"/>
						<DataGridCheckBoxColumn Header="Studying"
                                                Binding="{Binding StudyStatus}"
                                                Width="100"/>
						<DataGridTextColumn Header="Study Place"
                                            Binding="{Binding StudyPlace}"
                                            Width="180"
                                            ElementStyle="{StaticResource TextCellStyle}"/>
					</DataGrid.Columns>
				</DataGrid>
			</Grid>
		</GroupBox>

		<!-- Добавление жильца (только ManageOccupants) -->
		<GroupBox Grid.Row="2" Header="Add Resident" x:Name="AddResidentGroup" Margin="0,10,0,0">
			<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
				<StackPanel Orientation="Horizontal" Margin="10">
					<StackPanel Width="140" Margin="0,0,10,0">
						<TextBlock Text="Registration #"/>
						<TextBox x:Name="RegNumberTextBox"/>
					</StackPanel>
					<StackPanel Width="220" Margin="0,0,10,0">
						<TextBlock Text="Full Name"/>
						<TextBox x:Name="FullNameTextBox"/>
					</StackPanel>
					<StackPanel Width="160" Margin="0,0,10,0">
						<TextBlock Text="Gender"/>
						<ComboBox x:Name="GenderComboBox"/>
					</StackPanel>
					<StackPanel Width="180" Margin="0,0,10,0">
						<TextBlock Text="Birth Date"/>
						<DatePicker x:Name="BirthDatePicker"/>
					</StackPanel>
					<StackPanel Width="120" Margin="0,0,10,0">
						<TextBlock Text="Passport Series"/>
						<TextBox x:Name="PassportSeriesTextBox" MaxLength="4"/>
					</StackPanel>
					<StackPanel Width="120" Margin="0,0,10,0">
						<TextBlock Text="Passport Number"/>
						<TextBox x:Name="PassportNumberTextBox" MaxLength="6"/>
					</StackPanel>
					<StackPanel Width="220" Margin="0,0,10,0">
						<TextBlock Text="Issued By"/>
						<TextBox x:Name="PassportIssuedByTextBox"/>
					</StackPanel>
					<StackPanel Width="180" Margin="0,0,10,0">
						<TextBlock Text="Issue Date"/>
						<DatePicker x:Name="PassportIssueDatePicker"/>
					</StackPanel>
					<StackPanel Width="180" Margin="0,0,10,0">
						<TextBlock Text="Check-in Date"/>
						<DatePicker x:Name="CheckInDatePicker"/>
					</StackPanel>
					<Button x:Name="AddResidentButton"
                            Content="Add Resident"
                            Width="140"
                            Margin="10,20,0,0"/>
				</StackPanel>
			</ScrollViewer>
		</GroupBox>

		<!-- Редактирование изменяемых полей жильца (только ManageOccupants) -->
		<GroupBox Grid.Row="3" Header="Edit Selected Resident (mutable fields)" x:Name="EditResidentGroup" Margin="0,10,0,0">
			<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
				<StackPanel Orientation="Horizontal" Margin="10">
					<StackPanel Width="140" Margin="0,0,10,0">
						<TextBlock Text="Employed"/>
						<CheckBox x:Name="WorkStatusCheckBox"/>
					</StackPanel>
					<StackPanel Width="220" Margin="0,0,10,0">
						<TextBlock Text="Workplace"/>
						<TextBox x:Name="WorkplaceTextBox"/>
					</StackPanel>
					<StackPanel Width="140" Margin="0,0,10,0">
						<TextBlock Text="Studying"/>
						<CheckBox x:Name="StudyStatusCheckBox"/>
					</StackPanel>
					<StackPanel Width="220" Margin="0,0,10,0">
						<TextBlock Text="Study Place"/>
						<TextBox x:Name="StudyPlaceTextBox"/>
					</StackPanel>
					<Button x:Name="UpdateResidentButton"
                            Content="Update Resident"
                            Width="160"
                            Margin="10,20,0,0"/>
					<Button x:Name="RemoveResidentButton"
                            Content="Remove Resident"
                            Width="160"
                            Margin="10,20,0,0"/>
					<Button x:Name="RefreshResidentsButton"
                            Content="Refresh"
                            Width="120"
                            Margin="10,20,0,0"/>
				</StackPanel>
			</ScrollViewer>
		</GroupBox>

		<!-- Таблица детей -->
		<GroupBox Grid.Row="4" Header="Children">
			<Grid>
				<DataGrid x:Name="ChildrenGrid"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          Margin="5"
                          CanUserResizeRows="False"
                          EnableRowVirtualization="True"
                          EnableColumnVirtualization="True">
					<DataGrid.Resources>
						<Style x:Key="ChildTextCellStyle" TargetType="TextBlock">
							<Setter Property="TextWrapping" Value="NoWrap"/>
							<Setter Property="VerticalAlignment" Value="Center"/>
							<Setter Property="Padding" Value="4,0,4,0"/>
						</Style>
					</DataGrid.Resources>
					<DataGrid.Columns>
						<DataGridTextColumn Header="Full Name"
                                            Binding="{Binding FullName}"
                                            Width="200"
                                            ElementStyle="{StaticResource ChildTextCellStyle}"/>
						<DataGridTextColumn Header="Birth Date"
                                            Binding="{Binding BirthDateString}"
                                            Width="120"
                                            ElementStyle="{StaticResource ChildTextCellStyle}"/>
						<DataGridTextColumn Header="Parent Registration #"
                                            Binding="{Binding ParentRegNumber}"
                                            Width="180"
                                            ElementStyle="{StaticResource ChildTextCellStyle}"/>
						<DataGridTextColumn Header="Parent Name"
                                            Binding="{Binding ParentFullName}"
                                            Width="220"
                                            ElementStyle="{StaticResource ChildTextCellStyle}"/>
					</DataGrid.Columns>
				</DataGrid>
			</Grid>
		</GroupBox>

		<!-- Добавление ребёнка (только ManageOccupants) -->
		<GroupBox Grid.Row="5" Header="Add Child (select parent in Residents grid)" x:Name="AddChildGroup" Margin="0,10,0,0">
			<StackPanel Orientation="Horizontal" Margin="10">
				<StackPanel Width="220" Margin="0,0,10,0">
					<TextBlock Text="Child Full Name"/>
					<TextBox x:Name="ChildFullNameTextBox"/>
				</StackPanel>
				<StackPanel Width="180" Margin="0,0,10,0">
					<TextBlock Text="Birth Date"/>
					<DatePicker x:Name="ChildBirthDatePicker"/>
				</StackPanel>
				<Button x:Name="AddChildButton"
                        Content="Add Child"
                        Width="140"
                        Margin="10,20,0,0"/>
			</StackPanel>
		</GroupBox>
	</Grid>
</Window>